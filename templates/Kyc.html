<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KYC Form for Existing Customers</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border: 3px solid #000;
        }
        
        .header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid #000;
        }
        
        .bank-logo {
            width: 60px;
            height: 60px;
            background: #333;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 28px;
            flex-shrink: 0;
        }
        
        .header-text {
            flex: 1;
        }
        
        .form-title {
            font-size: 18px;
            font-weight: bold;
            text-decoration: underline;
        }
        
        .branch-label {
            font-size: 12px;
            margin-top: 3px;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 200px;
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .left-section {
            flex: 1;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }
        
        .form-group input[type="text"],
        .form-group input[type="date"],
        .form-group input[type="email"],
        .form-group input[type="tel"] {
            width: 100%;
            padding: 8px;
            border: 1px solid #999;
            font-size: 13px;
            background: #fff;
            border-radius: 3px;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .photo-box {
            border: 2px solid #000;
            min-height: 180px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f9f9f9;
            font-size: 12px;
            font-weight: bold;
            color: #666;
        }
        
        .signature-box {
            border: 2px solid #000;
            min-height: 100px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            background: #f9f9f9;
            padding: 10px;
            margin-top: 5px;
        }
        
        .signature-label {
            font-size: 11px;
            font-weight: bold;
            text-align: center;
        }
        
        .info-note {
            background: #fff3cd;
            border: 2px solid #ffc107;
            padding: 12px;
            margin: 20px 0;
            font-size: 12px;
            font-weight: bold;
            text-align: center;
            border-radius: 3px;
        }
        
        .documents-section {
            margin-top: 25px;
            padding: 20px;
            border: 2px solid #000;
        }
        
        .documents-title {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .documents-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .document-column {
            border: 1px solid #ddd;
            padding: 15px;
            background: #f9f9f9;
        }
        
        .column-title {
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
            padding: 5px;
            background: #e0e0e0;
        }
        
        .checkbox-list {
            list-style: none;
            padding: 0;
            counter-reset: item;
        }
        
        .checkbox-list li {
            margin-bottom: 8px;
            font-size: 11px;
            display: flex;
            align-items: flex-start;
            gap: 8px;
            counter-increment: item;
        }
        
        .checkbox-list li::before {
            content: counter(item) ".";
            font-weight: bold;
            min-width: 20px;
        }
        
        .footer-section {
            margin-top: 30px;
            text-align: right;
            padding-top: 20px;
            border-top: 2px solid #000;
        }
        
        .footer-label {
            font-size: 12px;
            font-style: italic;
            margin-bottom: 60px;
        }
        
        .note-section {
            margin-top: 20px;
            padding: 15px;
            background: #f0f0f0;
            border: 1px solid #ccc;
            font-size: 11px;
            line-height: 1.6;
        }
        
        @media print {
            body {
                background: white;
                padding: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="bank-logo">●</div>
            <div class="header-text">
                <div class="form-title">KYC FORM FOR EXISTING CUSTOMERS</div>
                <div class="branch-label">BRANCH: <input type="text" id="branch" style="border: none; border-bottom: 1px dotted #000; width: 300px; padding: 2px; margin-left: 5px;" placeholder="Branch Name"></div>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <div class="left-section">
                <div class="form-group">
                    <label>NAME:</label>
                    <input type="text" id="customer_name" placeholder="Full Name">
                </div>
                
                <div class="form-group">
                    <label>A/C NO:</label>
                    <input type="text" id="account_no" placeholder="Account Number">
                </div>
                
                <div class="form-group">
                    <label>DATE OF BIRTH:</label>
                    <input type="date" id="dob">
                </div>
                
                <div class="form-group">
                    <label>ADDRESS:</label>
                    <input type="text" id="address" placeholder="Complete Address">
                </div>
                
                <div class="form-group">
                    <label>FATHER/HUSBAND:</label>
                    <input type="text" id="father_husband" placeholder="Father's/Husband's Name">
                </div>
                
                <div class="form-group">
                    <label>MOTHER NAME:</label>
                    <input type="text" id="mother_name" placeholder="Mother's Name">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>CITY:</label>
                        <input type="text" id="city" placeholder="City name">
                    </div>
                    <div class="form-group">
                        <label>P.O.:</label>
                        <input type="text" id="post_office" placeholder="Post Office">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>STATE:</label>
                        <input type="text" id="state" placeholder="State">
                    </div>
                    <div class="form-group">
                        <label>PIN:</label>
                        <input type="text" id="pin_code" placeholder="PIN Code" maxlength="6">
                    </div>
                </div>
                
                <div class="form-group">
                    <label>MOBILE NO.:</label>
                    <input type="tel" id="mobile_no" placeholder="Mobile Number">
                </div>
            </div>
            
            <div style="display: flex; flex-direction: column; gap: 20px;">
                <div>
                    <div class="photo-box">
                        PHOTO
                    </div>
                </div>
                
                <div>
                    <div class="signature-box">
                    </div>
                    <div class="signature-label">SIGNATURE OF ACCOUNT HOLDER</div>
                </div>
            </div>
        </div>
        
        <!-- Info Note -->
        <div class="info-note">
            AT LEAST ONE DOCUMENT (PHOTO COPY) FORM EACH COLUMN TO BE SUBMITTED FORM BOTH
        </div>
        
        <!-- Documents Section -->
        <div class="documents-section">
            <div class="documents-title">LEAST</div>
            
            <div class="documents-grid">
                <!-- Proof of Photo Identity -->
                <div class="document-column">
                    <div class="column-title">PROOF OF PHOTO IDENTITY</div>
                    <ul class="checkbox-list">
                        <li>PASSPORT</li>
                        <li>ELECTION ID CARD</li>
                        <li>PAN CARD</li>
                        <li>DRIVING LICENSE/ VEHICLE R.C. BOOK</li>
                        <li>DRIVING LICENSE</li>
                        <li>ID CARD ISSUED BY REPUTED</li>
                        <li>RATION CARD</li>
                        <li>PPO</li>
                        <li>PHOTO ID CARD ISSUED BY A UNIVERSITY WHERE THE STUDENT RESIDES</li>
                    </ul>
                </div>
                
                <!-- Proof of Residence -->
                <div class="document-column">
                    <div class="column-title">PROOF OF RESIDENCE</div>
                    <ul class="checkbox-list">
                        <li>BANK ACCOUNT STATEMENT</li>
                        <li>SALARY SLIP</li>
                        <li>INCOME/ HEALTH TAX ASSESSMENT ORDER</li>
                        <li>GAS CONNECTION BILL</li>
                        <li>TELEPHONE BILL, LAND LINE</li>
                        <li>RENT MORE THAN 6 MONTH OLD</li>
                        <li>EMPLOYER ISSUED BY REPUTED EMPLOYER</li>
                        <li>PPO</li>
                        <li>LETTER ISSUED BY REPUTED AUTHORITY</li>
                        <li>DOMICILE CERTIFICATE</li>
                        <li>RESIDENCE/ LICENSE/ AGREEMENT</li>
                        <li>SALES DEED</li>
                        <li>LETTER FROM OF HOSTEL/ WARDEN OR I/C UNIVERSITY WHERE THE STUDENT RESIDES</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="footer-section">
            <div class="footer-label">Branch / Service Manager</div>
            <div style="border-top: 1px solid #000; width: 200px; margin-left: auto;"></div>
        </div>
        
        <!-- Note Section -->
        <div class="note-section">
            <strong>NOTE:</strong><br>
            KYC TO BE DONE ON ACCOUNT TO BE ATTACHED AND ORIGINAL TO BE SHOWN TO THE OFFICIAL FOR VERIFICATION.
            PHOTOCOPIES AND PHOTOGRAPH SHOULD BE KEPT.
        </div>
    </div>
    
    <script>
        // Auto-fill form from localStorage
        window.addEventListener('load', function() {
            console.log('KYC form page loaded');
            
            // Get data from localStorage
            const rawData = localStorage.getItem('kycData');
            console.log('Raw localStorage data:', rawData);
            
            if (rawData) {
                try {
                    const data = JSON.parse(rawData);
                    console.log('Parsed KYC data:', data);
                    
                    // Helper function to find value by various field names
                    function findValue(...fieldNames) {
                        for (let fieldName of fieldNames) {
                            if (data[fieldName] !== undefined && data[fieldName] !== null && data[fieldName] !== '') {
                                return data[fieldName];
                            }
                        }
                        return '';
                    }
                    
                    // Helper function to convert date format from DD/MM/YYYY to YYYY-MM-DD
                    function convertDateFormat(dateStr) {
                        if (!dateStr) return '';
                        // Check if already in YYYY-MM-DD format
                        if (dateStr.includes('-') && dateStr.split('-')[0].length === 4) {
                            return dateStr;
                        }
                        // Convert DD/MM/YYYY to YYYY-MM-DD
                        const parts = dateStr.split('/');
                        if (parts.length === 3) {
                            return `${parts[2]}-${parts[1].padStart(2, '0')}-${parts[0].padStart(2, '0')}`;
                        }
                        return dateStr;
                    }
                    
                    // Fill each field
                    const fillFormField = (id, value) => {
                        const element = document.getElementById(id);
                        if (element && value) {
                            element.value = value;
                            console.log(`✓ Filled ${id} with: ${value}`);
                        } else if (!element) {
                            console.warn(`⚠ Element not found: ${id}`);
                        }
                    };
                    
                    // Fill all fields
                    fillFormField('branch', findValue('branch'));
                    fillFormField('customer_name', findValue('customer_name', 'name', 'full_name'));
                    fillFormField('account_no', findValue('account_no', 'account_number', 'account_num'));
                    
                    // Handle date field
                    const dob = findValue('dob', 'date_of_birth', 'birth_date');
                    if (dob) {
                        fillFormField('dob', convertDateFormat(dob));
                    }
                    
                    fillFormField('address', findValue('address'));
                    fillFormField('father_husband', findValue('father_husband', 'father_name', 'husband_name'));
                    fillFormField('mother_name', findValue('mother_name'));
                    fillFormField('city', findValue('city', 'village', 'vill'));
                    fillFormField('post_office', findValue('post_office', 'po'));
                    fillFormField('state', findValue('state'));
                    fillFormField('pin_code', findValue('pin_code', 'pin', 'pincode'));
                    fillFormField('mobile_no', findValue('mobile_no', 'mobile_number', 'phone', 'mobile'));
                    
                    console.log('✓ KYC form auto-fill completed');
                    
                    // Auto-print after a short delay
                    setTimeout(() => {
                        window.print();
                    }, 1000);
                    
                } catch (error) {
                    console.error('Error parsing KYC data:', error);
                }
            } else {
                console.log('No KYC data found in localStorage');
            }
        });
    </script>
</body>
</html>
